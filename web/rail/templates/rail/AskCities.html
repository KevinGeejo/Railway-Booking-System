{% extends 'base_RAIL.html' %}
{% load get_dates %}

{% block title %}
    出行方案查询
{% endblock %}

{% block h1-title %}
    出行方案查询
{% endblock %}


{% block content %}
    <form method="post" action="/rail/AskCities/">
        {% csrf_token %}

        <label for="starterCity">
            出发城市
        </label>
        <input type="text" name="starterCity" id="starterCity"
               required
               value={{ starterCity }}>
        <br> <br>

        <label for="terminalCity">
            到达城市
        </label>
        <input type="text" name="terminalCity" id="terminalCity"
               required
               value={{ terminalCity }}>
        <br> <br>

        <label for="date">
            出发日期
        </label>
        <input type="date" name="date" id="date"
               required
               value={% if date %}{{ date }}
                   {% else %}{% tomorrow "%Y-%m-%d" %}
               {% endif %}>
        <br> <br>

        <label for="time">
            出发时间
        </label>
        <input type="time" name="time" id="time"
               required
               value="00:00:00">
        <br> <br>
        <input type="radio" name="askCity" id="normal" value="0">当程
        <input type="radio" name="askCity" id="reverse" value="1">返程
        <input type="submit">
    </form>
    <br>
    <br>

{% endblock %}

{% block answer %}
    <h2>无换乘</h2>
    <form method="post" action="/rail/BookingTicket/">
        {% csrf_token %}
        <table style="border-width: medium;
                       border-style: solid;"
               border="1">
            {% if f0 %}
                <tr>
                    <th>车次</th>
                    <th>出发时间</th>
                    <th>出发车站</th>
                    <th>到达时间</th>
                    <th>到达车站</th>
                    <th>软卧(上铺)</th>
                    <th>软卧(下铺)</th>
                    <th>硬卧(下铺)</th>
                    <th>硬卧(中铺)</th>
                    <th>硬卧(上铺)</th>
                    <th>软座</th>
                    <th>硬座</th>
                    <th style="color: mediumblue; font-weight: bold">余票</th>
                </tr>
                {% for f in f0 %}
                    <tr>
                        <th>{{ f.tid }}</th>
                        <th>{{ f.sta_time }}</th>
                        <th>{{ f.sta_station }}</th>
                        <th>{{ f.arr_time }}</th>
                        <th>{{ f.arr_station }}</th>

                        <th>{% ifnotequal ssl_r 0 %}
                            {{ f.pr_ssl }}
                        {% else %}
                            无票
                        {% endifnotequal %}</th>
                        <th>{% ifnotequal ssu_r 0 %}
                            {{ f.pr_ssu }}
                        {% else %}
                            无票
                        {% endifnotequal %}</th>
                        <th>{% ifnotequal hsl_r 0 %}
                            {{ f.pr_hsl }}
                        {% else %}
                            无票
                        {% endifnotequal %}</th>
                        <th>{% ifnotequal hsm_r 0 %}
                            {{ f.pr_hsm }}
                        {% else %}
                            无票
                        {% endifnotequal %}</th>
                        <th>{% ifnotequal hsu_r 0 %}
                            {{ f.pr_hsu }}
                        {% else %}
                            无票
                        {% endifnotequal %}</th>
                        <th>{% ifnotequal sse_r 0 %}
                            {{ f.pr_sse }}
                        {% else %}
                            无票
                        {% endifnotequal %}</th>
                        <th>{% ifnotequal hse_r 0 %}
                            {{ f.pr_hse }}
                        {% else %}
                            无票
                        {% endifnotequal %}</th>

                        <th style="color: mediumblue">
                            <label for="terminal">
                                <input type="radio"
                                       name="buy"
                                       id={{ f.tid }}
                                               value={{ f.tid }}>
                            </label>为此行程购票
                        </th>
                    </tr>
                {% endfor %}
            {% endif %}
        </table>
        <br><br><br>
        <h2>一次换乘</h2>


        <input type="submit" value="前往生成订单">
    </form>



{% endblock %}


